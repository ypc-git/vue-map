(function(t){function n(n){for(var o,r,p=n[0],c=n[1],l=n[2],s=0,f=[];s<p.length;s++)r=p[s],a[r]&&f.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(n);while(f.length)f.shift()();return i.push.apply(i,l||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],o=!0,p=1;p<e.length;p++){var c=e[p];0!==a[c]&&(o=!1)}o&&(i.splice(n--,1),t=r(r.s=e[0]))}return t}var o={},a={app:0},i=[];function r(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=o,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/map/";var p=window["webpackJsonp"]=window["webpackJsonp"]||[],c=p.push.bind(p);p.push=n,p=p.slice();for(var l=0;l<p.length;l++)n(p[l]);var u=c;i.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"034f":function(t,n,e){"use strict";var o=e("64a9"),a=e.n(o);a.a},5475:function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("097d");var o=e("2b0e"),a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("PointMap",{attrs:{msg:""}})],1)},i=[],r=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"point-map"},[e("div",{attrs:{id:"allmap"}})])}],c=(e("7f7f"),e("71f3")),l=e.n(c),u=e("bc3a"),s=e.n(u),f=e("60d0"),d=e.n(f),g={name:"PointMap",data:function(){return{id:null,pointLng:null,pointLat:null,points:null,map:null,pointName:null}},props:{msg:String},methods:{getMapPoint:function(){var t=this;s.a.get("http://140.143.193.163/mapDemo/getAllMapPoint.ypc",{}).then(function(n){if(1==n.data.code){t.points=JSON.parse(n.data.data);for(var e=t.map.getOverlays(),o=0;o<e.length-1;o++)t.map.removeOverlay(e[o]);for(var a=0;a<t.points.length;a++){var i=new l.a.Point(t.points[a].pointLng,t.points[a].pointLat),r=new l.a.Icon(d.a,new l.a.Size(25,25)),p=new l.a.Marker(i,{icon:r}),c=new l.a.Label(t.points[a].name,{offset:new l.a.Size(30,0)});c.setStyle({color:"#2c3e50",fontSize:"12px",border:"#616b75",background:"#ffcaca"}),p.setLabel(c),t.map.addOverlay(p),t.id==t.points[a].id&&t.map.panTo(i)}}}).catch(function(t){console.log(t)})},createMap:function(){var t=this;t.map=new l.a.Map("allmap");var n=new l.a.Point(116.404,39.915);t.map.centerAndZoom(n,15),t.map.enableScrollWheelZoom(!0);var e=new l.a.Geolocation;e.getCurrentPosition(function(n){if(this.getStatus()==BMAP_STATUS_SUCCESS){t.pointLng=n.point.lng,t.pointLat=n.point.lat;var e=new l.a.Icon(d.a,new l.a.Size(25,25)),o=new l.a.Label(t.pointName,{offset:new l.a.Size(30,0)});o.setStyle({color:"#2c3e50",fontSize:"12px",border:"#616b75",background:"#ffcaca"});var a=new l.a.Point(t.pointLng,t.pointLat),i=new l.a.Marker(a,{icon:e});i.setLabel(o),t.map.addOverlay(i),t.map.panTo(a),t.setMapPoint(n.point.lng,n.point.lat)}else console.log("failed:"+this.getStatus())},{enableHighAccuracy:!0})},setMapPoint:function(t,n){var e=this;s.a.post("http://140.143.193.163/mapDemo/setMapPoint.ypc?pointLng="+t+"&pointLat="+n+"&id="+this.id).then(function(t){1==t.data.code&&(e.id=t.data.data.id,e.pointName=t.data.data.name)}).catch(function(t){console.log(t)})},delMapPointById:function(){s.a.post("http://140.143.193.163/mapDemo/delMapPointById.ypc?id="+this.id).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})},destroyed:function(){s.a.post("http://140.143.193.163/mapDemo/delMapPointById.ypc?id="+this.id).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)}),alert("我已经离开了！"),this.stopTimer()}},beforeMount:function(){},mounted:function(){var t=this;this.createMap(),this.getMapPoint(),window.addEventListener("beforeunload",function(n){return t.delMapPointById()}),setInterval(this.getMapPoint,2e4)}},h=g,v=(e("ac4d"),e("2877")),A=Object(v["a"])(h,r,p,!1,null,"a0c48048",null);A.options.__file="PointMap.vue";var m=A.exports,M={name:"app",components:{PointMap:m}},b=M,w=(e("034f"),Object(v["a"])(b,a,i,!1,null,null,null));w.options.__file="App.vue";var y=w.exports;o["a"].prototype.$ajax=s.a,o["a"].config.productionTip=!1;new o["a"]({render:function(t){return t(y)}}).$mount("#app")},"60d0":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAADMklEQVRIS8WWX0hTURzHv7/rn0yZIjrM/Je9iKFQNu8kJbXAIkSjKCMY1JMPMlFB6EEisYdAMDX1zai3jFCKJRqomIp5HTNBtEAxFRIxcTlXottO3G3e3c2p1x7qvO2c7/d8zvmd3+93R/gHg5Qy2NRUMKzWOAAnwHErIFoijWZHif9ACDOZ1LDZqgBcAmPnQRQg23QHjL0H0XNkZnYTkX0/4L4QNj5eAcYeAwhTcNrvYOwJabXP/Gn9QpggPAVQoWBzX0kj8Xyl7+QeCBOEWgAPvYSM2WE2T2N2dh3Ly8cRG/sb8fFATMxpcFy8j7aWtNpH8jkvCBOE2wA6vEwrK+/Q0ZEHiyV8z80CAn5Cp+tBXNwtAJxsvYR4/vXubwnCjMZQOBzfAKgl8czMB3R2FhwatuzsF8jLuyfTrYLjTpFG80uc80DGxipB1CAJNzZ60dxcAKLD05wxhrKyt4iMvC75GasirVZ8WxlEEEYAXHCKGNtCU9MPWK3e8T7oSsHBi6iuFjMxyi0bIZ7PkSBsYCAQYWHbEnR9/RPa2rIODZOvoLR0GNHRzo3Fo4LjjokF6wwFMxoT4XAsSJ7JyV4YDFeODCkq6kF6+lWZL5F4fskFEYSzACakxeHhQQwO5h4Zkps7iJwcue8c8fxnF8RkSoLNJmaWa0xPG9DVVXhkSHGxAWlpHh/HJZFGs+iCzM+HYHXVKuW62dyH1tbLR4bo9R8RHn7R7XNArQ6j5OQteQoPgWj30dZQX7+C7e0zikEq1Vfo9UkgCnFn6BBptU6gB+JqiM68dg6z+Q1aWm4qqhPAgfLybqhUnlARVVJmZqM3xF/F9/e3Y3T0vk/L8L2cHTdu9CI19ZpswX/Fu7OsBMArSSw2xrW1l2hvz4LNtjd0ERFfoNOZEBFx14d8h3he6oH+unAdgBovE2MLsFgmMDcXhKWlKCQkrCElJRKhoWLByhujaKsjnvfq4v/ne7J7AzY2pgfRAwAnFWSYFUQ1uw/tqz/4G89YAIzGQjgcYhsvBFGg13sRmQD0ITCwgTIyVvc7zOFt3O1kRmMQ7HaxK7v+rWxuLlJ+vk3BLT11okT8t5o/aicgKbjGZBcAAAAASUVORK5CYII="},"64a9":function(t,n,e){},"71f3":function(t,n){t.exports=BMap},ac4d:function(t,n,e){"use strict";var o=e("5475"),a=e.n(o);a.a}});
//# sourceMappingURL=app.46e4a52d.js.map